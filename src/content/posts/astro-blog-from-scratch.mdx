---
title: ä» 0 åˆ° 1 æ­å»ºä¸€ä¸ª Astro åšå®¢
description: é›†æˆ Tailwind CSSã€i18nã€MDXã€RSSã€è¯„è®ºç³»ç»Ÿç­‰
published: 2024-09-01
category: å¼€å‘ç¬”è®°
tags:
  - Astro
  - Tailwind CSS
  - i18n
  - MDX
---

export const refs = [
  {
    site: 'https://innei.in/',
    repo: 'https://github.com/Innei/Shiro'
  },
  {
    site: 'https://fuwari.vercel.app/',
    repo: 'https://github.com/saicaca/fuwari'
  },
  {
    site: 'https://yfi.moe',
    repo: 'https://github.com/yy4382/yfi.moe'
  },
  {
    site: 'https://kai.bi/',
    repo: 'https://github.com/ccbikai/astro-aria'
  }
];

## ç›®å½•åŠå½“å‰è¿›å±•

- [x] åˆå§‹åŒ–é¡¹ç›®åŠé…ç½®
  - [x] Linter åŠåŸºæœ¬é…ç½®
  - [x] é™æ€åŒ–ç½‘ç«™è¾“å‡º
  - [x] æ·»åŠ å®˜æ–¹é›†æˆ
  - [x] åˆ›å»ºç¬¬ä¸€ä¸ª Layout
- [x] i18n å›½é™…åŒ–æ”¯æŒ
  - [x] å®‰è£…é…ç½®
  - [x] ç¿»è¯‘æ–‡æœ¬ç¤ºä¾‹
  - [x] è¯­è¨€é“¾æ¥
- [ ] åŸºç¡€å¸ƒå±€ã€æ ·å¼ã€åŠ¨ç”»
  - [x] é¡µé¢åˆ‡æ¢åŠ¨ç”»é…ç½®
  - [ ] è¯­è¨€åˆ‡æ¢ç»„ä»¶
  - [ ] ä¸»é¢˜ Dark æ¨¡å¼ç»„ä»¶
  - [ ] Search ç»„ä»¶ï¼ˆé™æ ·å¼ï¼‰
- [ ] æ–‡ç«  Collection
  - [ ] MDX å†…å®¹å¢å¼º
  - [ ] TOCã€é˜…è¯»è¿›åº¦
  - [ ] å­—æ•°ã€é˜…è¯»æ—¶é—´
  - [ ] Github å¡ç‰‡
  - [ ] ä»£ç é«˜äº®
- [ ] RSS
- [ ] è¯„è®ºç³»ç»Ÿ
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] è‹±è¯­åˆ‡æ¢æç¤º
- [ ] ç»Ÿè®¡åˆ†æã€å¹¿å‘Š

## å–œæ¬¢çš„å‡ ä¸ªç½‘ç«™å‚è€ƒ

<ul>
  {refs.map((item) => (
    <li>
      <a href={item.site} rel="nofollow">{item.site}</a> | Repo: &nbsp;
      <a href={item.repo} rel="nofollow">{item.repo}</a>
    </li>
  ))}
</ul>

## åˆå§‹åŒ–é¡¹ç›®åŠé…ç½®

åˆ›å»ºä¸€ä¸ªç©ºç™½é¡¹ç›®å¼€å§‹ï¼š

```bash
# å¯ä»¥ç”¨å…¶ä»– package manager è¿›è¡Œåˆ›å»º
â¯ bun create astro@latest

 astro   Launch sequence initiated.

   dir   Where should we create your new project?
         ./v0.md

  tmpl   How would you like to start your new project?
         Empty

    ts   Do you plan to write TypeScript?
         Yes

   use   How strict should TypeScript be?
         Strict

  deps   Install dependencies?
         No
      â—¼  No problem! Remember to install dependencies after setup.

   git   Initialize a new git repository?
         Yes

      âœ”  Project initialized!
         â–  Template copied
         â–  TypeScript customized
         â–  Git initialized

  next   Liftoff confirmed. Explore your project!

         Enter your project directory using cd ./v0.md
         Run bun run dev to start the dev server. CTRL+C to stop.
         Add frameworks like react or tailwind using astro add.

         Stuck? Join us at https://astro.build/chat

â•­â”€â”€â”€â”€â”€â•®  Houston:
â”‚ â—  â—¡ â—   Good luck out there, astronaut! ğŸš€
â•°â”€â”€â”€â”€â”€â•¯
```

### Linter åŠåŸºæœ¬é…ç½®

- åˆ›å»º `.editorconfig`
- å®‰è£… Linter
```bash
bun add -D @biomejs/biome @willin/biome-config
```
- åˆ›å»º `biome.json` Linter é…ç½®æ–‡ä»¶
```json
{
  "$schema": "https://biomejs.dev/schemas/1.8.3/schema.json",
  "extends": ["@willin/biome-config"],
  "overrides": [
    {
      "include": ["*.svelte", "*.astro", "*.vue"],
      "linter": {
        "rules": {
          "style": {
            "useConst": "warn",
            "useImportType": "warn"
          }
        }
      }
    }
  ]
}
```
- æ·»åŠ  `pre commit` æ ¡éªŒ
```bash
bun add -D husky lint-staged
# åˆ›å»ºé’©å­
npx husky
```

### é™æ€åŒ–ç½‘ç«™è¾“å‡º

éƒ¨ç½²ä¸ºé™æ€é¡µé¢ï¼Œå¹¶è¿›è¡Œä¸Šé“¾ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦é…ç½®è¾“å‡ºä¸º `static`ï¼š

```ts
// astro.config.ts
import { defineConfig } from "astro/config";

// https://astro.build/config
export default defineConfig({
	site: "https://v0.md",
	output: "static",
	build: {
		format: "directory"
	}
});
```

### æ·»åŠ å®˜æ–¹é›†æˆ

```bash
bunx astro add tailwind
bunx astro add mdx
bunx astro add sitemap
```

### åˆ›å»ºç¬¬ä¸€ä¸ª Layout

åˆ›å»ºä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶ã€‚

`src/styles/global.css`ï¼š

```css
/* src/styles/global.css */
@tailwind base;
@tailwind components;
@tailwind utilities;
```

`src/layout/BaseLayout.astro`ï¼š

```astro
---
import '../styles/global.css';
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
	</head>
	<body>
		<slot />
	</body>
</html>
```

çœ‹çœ‹æ•ˆæœï¼š

```bash
bun dev
```

ç„¶åè®¿é—®ï¼š http://localhost:4321

## i18n å›½é™…åŒ–æ”¯æŒ

### å®‰è£…é…ç½®

`astro-i18n-aut` æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ i18n è·¯ç”±æ¡†æ¶ï¼Œä½†æ˜¯ä¸æä¾›æ–‡æœ¬ç¿»è¯‘åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±å®ç°ã€‚

å®ç°çš„éƒ¨åˆ†å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ’ä»¶ [Remix i18n](https://github.com/willin/remix-i18n/blob/main/src/i18n.ts)

```bash
bun add astro-i18n-aut dlv templite
bun add -D @types/dlv
```

æ·»åŠ  `src/const.ts` é…ç½®é¡¹æ–‡ä»¶ï¼š

```ts
// Place any global data in this file.
// You can import this data from anywhere in your site by using the `import` keyword.

export const SITE_TITLE = 'Willin Wang (v0)' as const;
export const SITE_DESCRIPTION = 'To be Willin is to be Willing.' as const;
export const SITE_DOMAIN = 'https://v0.md' as const;

export const defaultLocale = 'zh' as const;
export const locales = {
  en: 'en-US', // the `defaultLocale` value must present in `locales` keys
  zh: 'zh-CN'
} as const;
```

å’Œ `src/i18n/index.ts`ï¼š

```ts
import dlv from 'dlv';
import tmpl, { type Values } from 'templite';
import type { locales } from '../consts';
import en from './en.json';
import zh from './zh.json';

const messages = {
  zh,
  en
};

export const i18n =
  (lang: string) =>
  (key: string, params: Values = {}): string => {
    const val = dlv(messages?.[lang as keyof typeof locales], key, '');
    if (typeof val === 'function') return val(params);
    if (typeof val === 'string') return tmpl(val, params);
    return val;
  };
```

æ·»åŠ  i18n é›†æˆï¼Œå¹¶æ³¨æ„ `Sitemap` æ’ä»¶éœ€è¦è°ƒæ•´ä»¥æ”¯æŒå¤šè¯­è¨€ï¼š

```ts
import mdx from '@astrojs/mdx';
import sitemap from '@astrojs/sitemap';
import tailwind from '@astrojs/tailwind';
import { filterSitemapByDefaultLocale, i18n } from 'astro-i18n-aut/integration';
import { defineConfig } from 'astro/config';
import { defaultLocale, locales } from './src/consts';

// https://astro.build/config
export default defineConfig({
  site: 'https://v0.md',
  integrations: [
    tailwind(),
    i18n({
      locales,
      defaultLocale
    }),
    icon(),
    sitemap({
      i18n: {
        locales,
        defaultLocale
      },
      filter: filterSitemapByDefaultLocale({ defaultLocale })
    })
  ],
  output: 'static',
  build: {
    format: 'directory'
  }
});
```

### ç¿»è¯‘æ–‡æœ¬ç¤ºä¾‹

```astro
---
import { i18n } from '@/i18n';
import { getLocale } from 'astro-i18n-aut';

const locale = getLocale(Astro.url);
const t = i18n(locale);
---

<h1>ğŸ§‘â€ğŸš€ {t('title')}</h1>

// -.- å…¶ä»–å†…å®¹
```

### è¯­è¨€é“¾æ¥

`astro-i18n-aut` æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•æ¥è¾…åŠ©ç”Ÿæˆã€åˆ¤æ–­é“¾æ¥

```ts
import {
  getAllLocaleUrls,
  getLocaleUrl,
  getLocaleUrlPrefix,
  getUrlWithoutLocale
 } from 'astro-i18n-aut';

// @example: `en` ä¸º default locale
getAllLocaleUrls("/es/about")
// { en: "/about", "es": "/es/about" }
getAllLocaleUrls("/about")
// { en: "/about", "es": "/es/about" }


getLocaleUrl("/es/about", "en")
// "/about"
getLocaleUrl("/about", "es")
// "/es/about"
getLocaleUrl("/es/about", "fr")
// "/fr/about"


getLocaleUrlPrefix("/es/about")
// "/es"
getLocaleUrlPrefix("/about")
// ""


getUrlWithoutLocale("/es/about")
// "/about"
```

## åŸºç¡€å¸ƒå±€ã€æ ·å¼ã€åŠ¨ç”»

### é¡µé¢åˆ‡æ¢åŠ¨ç”»é…ç½®

ç”¨åˆ°äº† Astro è‡ªå¸¦çš„ `ViewTransitions` å’Œ `astro-loading-indicator` ï¼ˆåŠ è½½è¿›åº¦æ¡ï¼‰ç»„ä»¶ã€‚å¯ä»¥æ’å…¥åˆ° `BaseLayout` çš„ `head` ä¸­ã€‚

```astro
---
import { ViewTransitions } from 'astro:transitions';
import LoadingIndicator from 'astro-loading-indicator/component';
---

<head>
  <ViewTransitions fallback="swap" />
  <LoadingIndicator color="#f06" />
</head>

// -.- å…¶ä»–å†…å®¹
```

### è¯­è¨€åˆ‡æ¢ç»„ä»¶

### ä¸»é¢˜ Dark æ¨¡å¼ç»„ä»¶

### Search ç»„ä»¶ï¼ˆé™æ ·å¼ï¼‰

## æ–‡ç«  Collection

## MDX å†…å®¹å¢å¼º

### TOCã€é˜…è¯»è¿›åº¦

### å­—æ•°ã€é˜…è¯»æ—¶é—´

### Github å¡ç‰‡

### ä»£ç é«˜äº®

## RSS

## è¯„è®ºç³»ç»Ÿ

## æ€§èƒ½ä¼˜åŒ–

## è‹±è¯­åˆ‡æ¢æç¤º

## ç»Ÿè®¡åˆ†æã€å¹¿å‘Š


